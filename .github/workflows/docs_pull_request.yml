name: Docs pull request

on: pull_request

jobs:
  lint_test_build:
    name: lint, test and build
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./docs
    steps:
      - uses: actions/checkout@v1

      - uses: actions/setup-node@v1
        with:
          node-version: '14.x'

      - name: npm install
        run: npm install

      # - name: lint
      #   run: npm run lint:check

      # - name: build
      #   run: npm run build

      # - name: abc
      #   run: ls -l

      - name: Cypress run
        uses: cypress-io/github-action@v4.2.0
        with: 
          # runTests: false
          build: npm run build
          start: npm test
          # wait-on: 'http://localhost:9000'
          # wait-on-timeout: 120
          working-directory: docs    

  # cypress_test:
  #   # needs: lint_test_build
  #   name: cypress test
  #   runs-on: ubuntu-latest
  #   defaults:
  #     run:
  #       working-directory: ./docs

  #   steps:
  #     - name: Checkout
  #       uses: actions/checkout@v1

  #     - uses: actions/setup-node@v1
  #       with:
  #         node-version: '14.x'

  #     - name: npm install
  #       run: npm install

  #     - name: Cypress run
  #       uses: cypress-io/github-action@v4.2.0
  #       with: 
  #         build: npm run build
  #         start: npm start
  #         working-directory: ./docs